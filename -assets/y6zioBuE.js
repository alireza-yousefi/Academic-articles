import{d as B,r as f,j as M,t as l,x as r,y as u,J as N,K as R,L as v,M as P,v as a,_ as T}from"./DXZ8ldz3.js";import{r as U,u as V}from"./BW4wuNOV.js";const $={class:"flex flex-col w-full p-5 Estedad_FD_Light",style:{direction:"rtl"}},q={class:"flex text-center justify-between mx-28 mt-10"},G={class:"text-center flex"},J={key:0,class:"text-gray-600 mt-2"},K={key:1,class:"text-gray-600 mt-2"},Q={class:"flex justify-center items-center"},z={class:"text-lg text-slate-800 font-bold w-full text-center Estedad_FD_Bold"},H={class:"text-sm text-slate-700 font-bold w-full text-center mt-3"},W={class:"grid grid-cols-6 gap-5 w-full border-t border-slate-700 mt-2 py-2"},X=B({__name:"index",setup(Y){const b=[{count:1,PersonOne:100,PersonOther:0},{count:2,PersonOne:90,PersonOther:60},{count:3,PersonOne:80,PersonOther:50},{count:4,PersonOne:70,PersonOther:40},{count:5,PersonOne:60,PersonOther:30},{count:6,PersonOne:50,PersonOther:25}],h=f([]),m=f(null),d=f(""),p=f(""),w=M(()=>{if(!p.value.trim())return h.value;const s=p.value.toLowerCase();return h.value.filter(e=>!!(e.title&&e.title.toLowerCase().includes(s)||String(e.PriceAll).toLowerCase().includes(s)||String(e.ImpactFactor).toLowerCase().includes(s)||e.Authors.some(t=>t.name&&t.name.toLowerCase().includes(s)||String(t.price).toLowerCase().includes(s)||String(t.percent).toLowerCase().includes(s))))}),O=()=>{p.value=d.value},A=()=>{d.value="",p.value=""},C=s=>{let e=(1.5*s+.25)*15e6*2;return Math.min(e,25e6)},L=(s,e)=>{const t=Math.min(s.length,6),n=b.find(o=>o.count===t);return n?s.map((o,c)=>({name:o,percent:c===0?n.PersonOne:n.PersonOther,price:e*(c===0?n.PersonOne:n.PersonOther)/100})):(console.error("خطا در یافتن درصد مناسب برای تعداد نویسندگان:",t),[])},S=s=>{var n;const e=(n=s.target.files)==null?void 0:n[0];if(!e)return;m.value=e;const t=new FileReader;t.readAsArrayBuffer(e),t.onload=o=>{var _;const c=new Uint8Array((_=o.target)==null?void 0:_.result),x=U(c,{type:"array"}),k=x.SheetNames[0],D=x.Sheets[k],F=V.sheet_to_json(D,{header:1});h.value=F.filter(i=>i.length===22&&i[0]!=="DOI").map(i=>{const g=parseFloat(i[9]),j=i[19].split("*"),E=i[18],y=C(g),I=L(j,y);return{title:E,ImpactFactor:g,PriceAll:y,Authors:I}})}};return(s,e)=>(a(),l("div",$,[r("div",q,[r("div",G,[e[1]||(e[1]=r("label",{for:"file-upload",class:"cursor-pointer bg-blue-500 text-white py-2 ml-4 px-4 rounded-lg hover:bg-blue-600 transition duration-300"}," فایل را انتخاب کنید ",-1)),r("input",{id:"file-upload",class:"hidden",type:"file",onChange:S,accept:".xlsx, .xls"},null,32),m.value?(a(),l("p",K,"فایل انتخاب شده: "+u(m.value.name),1)):(a(),l("p",J,"هیچ فایلی انتخاب نشده است"))]),r("div",Q,[N(r("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),type:"text",placeholder:"جستجو (مثلاً نام یا مبلغ)",class:"border rounded py-2 px-3 w-64"},null,512),[[R,d.value]]),r("button",{onClick:O,class:"bg-green-500 ml-1 text-white py-2 px-4 rounded-lg mr-2"}," جستجو "),r("button",{onClick:A,class:"bg-gray-500 text-white py-2 px-4 rounded-lg"}," حذف جستجو ")])]),(a(!0),l(v,null,P(w.value,(t,n)=>(a(),l("div",{class:"my-2 bg-slate-200 flex flex-col justify-center items-center border border-slate-700 rounded-md p-2",key:`data_${n}`},[r("div",z,u(t.title),1),r("div",H," مبلغ کل دریافتی : "+u(t.PriceAll.toLocaleString("fa-IR"))+" ریال ",1),r("div",W,[(a(!0),l(v,null,P(t.Authors,(o,c)=>(a(),l("div",{class:"my-2 bg-slate-200 flex flex-col justify-start items-center",key:`author${c}`},[r("span",null,u(o.name),1),r("span",null," درصد مشارکت : "+u(o.percent)+"% ",1),r("span",null," مبلغ : "+u(o.price.toLocaleString("fa-IR"))+" ریال",1)]))),128))])]))),128))]))}}),te=T(X,[["__scopeId","data-v-560c4f31"]]);export{te as default};
